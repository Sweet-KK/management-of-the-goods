webpackJsonp([6],{"6vTd":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.fix-title>a[data-v-153e4e24] {\n  padding: 0 0.266667rem;\n  position: absolute;\n  left: 0;\n  top: 0;\n  font-size: 0.426667rem;\n}\nform[data-v-153e4e24] {\n  padding: 0.266667rem;\n  font-size: 0.48rem;\n}\n.item[data-v-153e4e24] {\n  margin-top: 0.266667rem;\n}\n.cube-btn-primary[data-v-153e4e24] {\n  margin-top: 0.533333rem;\n}\n.item label>i[data-v-153e4e24] {\n  color: #e64340;\n  vertical-align: middle;\n  margin-right: 0.133333rem;\n}",""])},"8lth":function(t,e,i){var a=i("6vTd");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("46d8f9a6",a,!0,{})},"jd+X":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"upload",data:function(){return{isRender:!0,title:"",content:"",origPrice:null,currPrice:null,images:[]}},methods:{addToArr:function(t){if("success"==t.status){var e=t.response.filename;this.images.push("/api/assets/"+e)}},delFromArr:function(t){var e=this.images.indexOf("/api/assets/"+t);e>-1&&this.images.splice(e,1)},filesRemoved:function(t){var e=this;if(console.log(t),1==t.response.status){var i=t.response.filename;console.log(i),this.axios.post("/api/delfile",{fileName:i}).then(function(t){1==t.data.status&&e.delFromArr(i)}).catch(function(t){console.log(t)})}},uploadData:function(){var t=this;""!=this.title&&""!=this.content?this.axios.post("/api/upload/text",{title:this.title,content:this.content,origPrice:this.origPrice,currPrice:this.currPrice,images:this.images}).then(function(e){1==e.data.status?(t.isRender=!1,t.$nextTick(function(){t.isRender=!0}),t.title="",t.content="",t.origPrice=null,t.currPrice=null,t.images=[]):console.log("商品新增失败")}).catch(function(t){console.log(t)}):this.$createToast({type:"warn",time:1e3,txt:"标题和内容不能为空!"}).show()},toBack:function(){this.$router.back(-1)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload"},[i("div",{staticClass:"fix-title"},[i("a",{staticClass:"be-back icon iconfont icon-guanbi",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toBack(e)}}}),t._v(" "),i("h2",[t._v("商品上传")])]),t._v(" "),i("form",{attrs:{method:"post",enctype:"multipart/form-data",action:""},on:{submit:function(e){return e.preventDefault(),t.uploadData(e)}}},[i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[t._v("选择图片：")]),t._v(" "),t.isRender?i("cube-upload",{attrs:{action:"/api/upload/img","simultaneous-uploads":9},on:{"file-success":t.addToArr,"file-removed":t.filesRemoved}}):t._e(),t._v(" "),i("input",{attrs:{type:"hidden",name:"images"},domProps:{value:t.images}})],1),t._v(" "),i("div",{staticClass:"item"},[t._m(0),t._v(" "),i("cube-input",{attrs:{clearable:!0,placeholder:"请输入商品标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),i("div",{staticClass:"item"},[t._m(1),t._v(" "),i("cube-textarea",{attrs:{maxlength:500,placeholder:"请输入商品介绍"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[t._v("原价：")]),t._v(" "),i("cube-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入商品原价"},model:{value:t.origPrice,callback:function(e){t.origPrice=e},expression:"origPrice"}})],1),t._v(" "),i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[t._v("售价：")]),t._v(" "),i("cube-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入商品售价"},model:{value:t.currPrice,callback:function(e){t.currPrice=e},expression:"currPrice"}})],1),t._v(" "),i("cube-button",{attrs:{primary:!0,type:"submit"}},[t._v("提交")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("i",[this._v("*")]),this._v("标题：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("i",[this._v("*")]),this._v("内容：")])}]};var s=i("VU/8")(a,n,!1,function(t){i("8lth")},"data-v-153e4e24",null);e.default=s.exports}});