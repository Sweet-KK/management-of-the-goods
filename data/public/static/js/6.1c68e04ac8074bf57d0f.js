webpackJsonp([6],{e2Ah:function(e,t,i){var n=i("vgBw");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("6d441d57",n,!0,{})},"jd+X":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"upload",data:function(){return{isRender:!0,title:"",content:"",origPrice:null,currPrice:null,images:[]}},methods:{addToArr:function(e){if("success"==e.status){var t=e.response.filename;this.images.push("/api/assets/"+t)}},delFromArr:function(e){var t=this.images.indexOf("/api/assets/"+e);t>-1&&this.images.splice(t,1)},filesRemoved:function(e){var t=this;if(console.log(e),1==e.response.status){var i=e.response.filename;console.log(i),this.axios.post("/api/delfile",{fileName:i}).then(function(e){1==e.data.status&&t.delFromArr(i)}).catch(function(e){console.log(e)})}},uploadData:function(){var e=this;""!=this.title&&""!=this.content?this.axios.post("/api/upload/text",{title:this.title,content:this.content,origPrice:this.origPrice,currPrice:this.currPrice,images:this.images}).then(function(t){1==t.data.status?(e.isRender=!1,e.$nextTick(function(){e.isRender=!0}),e.title="",e.content="",e.origPrice=null,e.currPrice=null,e.images=[]):console.log("商品新增失败")}).catch(function(e){console.log(e)}):this.$createToast({type:"warn",time:1e3,txt:"标题和内容不能为空!"}).show()},toBack:function(){this.$router.back(-1)}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload"},[i("div",{staticClass:"fix-title"},[i("a",{staticClass:"be-back icon iconfont icon-guanbi",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.toBack(t)}}}),e._v(" "),i("h2",[e._v("商品上传")])]),e._v(" "),i("form",{attrs:{method:"post",enctype:"multipart/form-data",action:""},on:{submit:function(t){return t.preventDefault(),e.uploadData(t)}}},[i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[e._v("选择图片：")]),e._v(" "),e.isRender?i("cube-upload",{attrs:{action:"/api/upload/img","simultaneous-uploads":9},on:{"file-success":e.addToArr,"file-removed":e.filesRemoved}}):e._e(),e._v(" "),i("input",{attrs:{type:"hidden",name:"images"},domProps:{value:e.images}})],1),e._v(" "),i("div",{staticClass:"item"},[e._m(0),e._v(" "),i("cube-input",{attrs:{clearable:!0,placeholder:"请输入商品标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("div",{staticClass:"item"},[e._m(1),e._v(" "),i("cube-textarea",{attrs:{maxlength:500,placeholder:"请输入商品介绍"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[e._v("原价：")]),e._v(" "),i("cube-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入商品原价"},model:{value:e.origPrice,callback:function(t){e.origPrice=t},expression:"origPrice"}})],1),e._v(" "),i("div",{staticClass:"item"},[i("label",{attrs:{for:""}},[e._v("售价：")]),e._v(" "),i("cube-input",{attrs:{clearable:!0,type:"number",placeholder:"请输入商品售价"},model:{value:e.currPrice,callback:function(t){e.currPrice=t},expression:"currPrice"}})],1),e._v(" "),i("cube-button",{attrs:{primary:!0,type:"submit"}},[e._v("提交")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("i",[this._v("*")]),this._v("标题：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:""}},[t("i",[this._v("*")]),this._v("内容：")])}]};var r=i("VU/8")(n,a,!1,function(e){i("e2Ah")},"data-v-153e4e24",null);t.default=r.exports},vgBw:function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,"\n.fix-title>a[data-v-153e4e24] {\n  padding: 0 0.266667rem;\n  position: absolute;\n  left: 0;\n  top: 0;\n  font-size: 0.426667rem;\n}\nform[data-v-153e4e24] {\n  padding: 0.266667rem;\n  font-size: 0.48rem;\n}\n.item[data-v-153e4e24] {\n  margin-top: 0.266667rem;\n}\n.cube-btn-primary[data-v-153e4e24] {\n  margin-top: 0.533333rem;\n}\n.item label>i[data-v-153e4e24] {\n  color: #e64340;\n  vertical-align: middle;\n  margin-right: 0.133333rem;\n}","",{version:3,sources:["C:/Users/Admin/Desktop/study/shop_list/photos/src/components/Upload.vue"],names:[],mappings:";AACA;EACE,uBAAuB;EACvB,mBAAmB;EACnB,QAAQ;EACR,OAAO;EACP,uBAAuB;CACxB;AACD;EACE,qBAAqB;EACrB,mBAAmB;CACpB;AACD;EACE,wBAAwB;CACzB;AACD;EACE,wBAAwB;CACzB;AACD;EACE,eAAe;EACf,uBAAuB;EACvB,0BAA0B;CAC3B",file:"Upload.vue",sourcesContent:["\n.fix-title>a[data-v-153e4e24] {\n  padding: 0 0.266667rem;\n  position: absolute;\n  left: 0;\n  top: 0;\n  font-size: 0.426667rem;\n}\nform[data-v-153e4e24] {\n  padding: 0.266667rem;\n  font-size: 0.48rem;\n}\n.item[data-v-153e4e24] {\n  margin-top: 0.266667rem;\n}\n.cube-btn-primary[data-v-153e4e24] {\n  margin-top: 0.533333rem;\n}\n.item label>i[data-v-153e4e24] {\n  color: #e64340;\n  vertical-align: middle;\n  margin-right: 0.133333rem;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=6.1c68e04ac8074bf57d0f.js.map